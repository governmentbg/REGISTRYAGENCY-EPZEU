import { ObjectHelper } from "Cnsys.Core";
import { EPZEUBaseComponent, ValidationSummaryErrors, ValidationSummaryStrategy, ValidationSummaryErrorsPreviewUI } from 'EPZEU.Core';
import { FieldContainerProps, ListRecordsContainerProps, PersonTypes, PersonUI, RecordContainerProps, SectionSubTitle, withFieldContainer, withListRecordsContainer, withRecordContainer } from 'EPZEU.CR.Domain';
import { observer } from "mobx-react";
import * as React from "react";
import { F21800_Partner218Part, F2180_Partner218, F218_Partners218 } from '../../Models/Fields/ModelsAutoGenerated';

class F2180_Partner218UIImpl extends EPZEUBaseComponent<ListRecordsContainerProps, F2180_Partner218> {

    renderEdit(): JSX.Element {
        return (<>
            <PersonUI {...this.bind(m => m.subject)} PersonType={PersonTypes.Partner218} />
        </>);
    }

    renderDisplay(): JSX.Element {
        return <PersonUI {...this.bind(m => m.subject)} PersonType={PersonTypes.Partner218} />
    }
}

const F2180_Partner218UI = withListRecordsContainer(F2180_Partner218UIImpl, F2180_Partner218, {
    addButtonLabelKey: "CR_APP_ADD_PARTNER_L",
    hasAtLeastOneRecord: true,
    valSummaryStrategy: ValidationSummaryStrategy.excludeAllExcept,
    valSummaryRecursive: true,
    valSummaryPropNames: ["", "subject."]
})

class F21800_Partner218PartImpl extends EPZEUBaseComponent<RecordContainerProps, F21800_Partner218Part>{
    renderEdit(): JSX.Element {
        return <div className="row">
            <div className="form-group col-sm-6 col-lg-4">
                {this.labelFor(x => x.count, "CR_GL_PROPORTION_NUMBER_L")}
                {this.textBoxFor(x => x.count)}
            </div>
            <div className="form-group col-sm-6 col-lg-4">
                {this.labelFor(x => x.value, "GL_VALUE_L")}
                {this.textBoxFor(x => x.value)}
            </div>
        </div>
    }

    renderDisplay(): JSX.Element {
        return <>
            {!ObjectHelper.isStringNullOrEmpty(this.model.count) ? <div>{this.getResource('CR_GL_PROPORTION_NUMBER_L').charAt(0).toUpperCase() + this.getResource('CR_GL_PROPORTION_NUMBER_L').slice(1) + ": " + this.model.count}</div> : null}
            {!ObjectHelper.isStringNullOrEmpty(this.model.value) ? <div>{this.getResource('GL_VALUE_L') + ": " + this.model.value}</div> : null}
        </>
    }
}

const F21800_Partner218PartUI = withRecordContainer(F21800_Partner218PartImpl);

@observer class F218_Partners218UI extends EPZEUBaseComponent<FieldContainerProps, F218_Partners218> {

    renderEdit(): JSX.Element {
        return <>
            <ValidationSummaryErrors errors={this.props.modelReference.getErrors()} />
            <F21800_Partner218PartUI {...this.bind(x => x.partner218Part)} />
            <SectionSubTitle subTitleTextKey={"CR_APP_CORPORATE_SHARE_PART_L"} />
            <F2180_Partner218UI {...this.bind(x => x.partner218List)} />
        </>
    }

    renderDisplay(): JSX.Element {
        return (<>
            <ValidationSummaryErrorsPreviewUI errors={this.props.modelReference.getErrors()} />
            <F21800_Partner218PartUI {...this.bind(x => x.partner218Part)} />
            <F2180_Partner218UI {...this.bind(x => x.partner218List)} />
        </>);
    }
}

export const F218_Partners218FieldUI = withFieldContainer(F218_Partners218UI, {
    fieldLabelTextKey: "CR_F_218_L"
});