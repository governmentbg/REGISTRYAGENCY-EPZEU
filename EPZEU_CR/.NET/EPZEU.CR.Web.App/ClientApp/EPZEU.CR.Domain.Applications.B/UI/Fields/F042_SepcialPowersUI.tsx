import { ObjectHelper } from 'Cnsys.Core';
import { EPZEUBaseComponent, ValidationSummaryStrategy } from 'EPZEU.Core';
import { ApplicationFormContextProviderProps, FieldContainerProps, ListRecordsContainerProps, withFieldSingleListRecordsContainer } from 'EPZEU.CR.Domain';
import { observer } from "mobx-react";
import * as React from "react";
import { F0420_SpecialPower } from '../../Models/Fields/ModelsAutoGenerated';

interface F0420_SpecialPowersProps extends ApplicationFormContextProviderProps, FieldContainerProps {

}

@observer class F042_SepcialPowersUI extends EPZEUBaseComponent<ListRecordsContainerProps, F0420_SpecialPower> {
    constructor(props: F0420_SpecialPowersProps) {
        super(props);
    }

    renderEdit(): JSX.Element {
        return (<>
            <div className="row">
                <div className="form-group col-12">
                    {this.labelFor(m => m.procuratorName, 'CR_APP_NAME_PROCURATOR_SPECIAL_RIGHTS_L')}
                    {this.textBoxFor(m => m.procuratorName)}
                </div>
            </div>
            <div className="row">
                <div className="form-group col-12">
                    <div className="custom-control custom-checkbox">{this.checkBoxFor(x => x.rightToAlienate, "CR_APP_00104_L")}</div>
                    <div className="custom-control custom-checkbox">{this.checkBoxFor(x => x.rightToBurden, "CR_APP_00105_L")}</div>
                </div>
            </div>
        </>);
    }

    renderDisplay(): JSX.Element {
        return (
            <>
                {this.model.procuratorName}
                {
                    //слагаме запетая само ако преди това сме render-нали нещо и ако след това ще render-ваме още нещо
                    !ObjectHelper.isStringNullOrEmpty(this.model.procuratorName) && this.model.rightToAlienate && <>,&nbsp;</>
                }
                {this.model.rightToAlienate && <>{this.getResource('CR_APP_00104_L')}</>}
                {
                    //слагаме запетая само ако преди това сме render-нали нещо и ако след това ще render-ваме още нещо
                    (!ObjectHelper.isStringNullOrEmpty(this.model.procuratorName) || this.model.rightToAlienate) && this.model.rightToBurden && <>,&nbsp;</>
                }
                {this.model.rightToBurden && <>{this.getResource('CR_APP_00105_L')}</>}
            </>
        );
    }
}

export const F042_SepcialPowersFieldUI = withFieldSingleListRecordsContainer(F042_SepcialPowersUI, F0420_SpecialPower, {
    addButtonLabelKey: "GL_ADD_L",
    listSelector: m => m.sepcialPowersList,
    fieldLabelTextKey: "CR_F_42_L",
    hasAtLeastOneRecord: true,
    valSummaryStrategy: ValidationSummaryStrategy.excludeAllExcept,
    valSummaryRecursive: true,
    valSummaryPropNames: ["", "F0420_SpecialPower."]
});