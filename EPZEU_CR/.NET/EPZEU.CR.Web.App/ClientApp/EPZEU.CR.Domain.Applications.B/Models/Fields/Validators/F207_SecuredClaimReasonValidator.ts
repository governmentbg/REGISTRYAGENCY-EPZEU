import { RecordValidator } from 'EPZEU.CR.Domain';
import { F207_SecuredClaimReason } from '../ModelsAutoGenerated';

export class F207_SecuredClaimReasonValidator extends RecordValidator<F207_SecuredClaimReason> {
    constructor() {
        super();

        this.ruleFor(x => x.date).notEmpty().withMessage(this.getMessage("CR_APP_00137_E"))//Полето "Дата" е задължително!
        this.ruleFor(x => x.description).notEmpty().when(x => x.otherSource).withMessage(this.getMessage("CR_APP_00138_E"))//Когато е избран "Друг източник" трябва да се попълни описателното поле.
    }

    public validateInternal(obj: F207_SecuredClaimReason): boolean {
        let isValid = super.validateInternal(obj);

        if (!obj.contract && !obj.courtOrder && !obj.administrativeAct && !obj.otherSource) {
            obj.addError(this.getMessage('CR_APP_00136_E')); //Посочете основание!

            isValid = false;
        } 

        return isValid;
    }
}