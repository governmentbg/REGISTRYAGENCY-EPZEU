import { EPZEUBaseValidator } from 'EPZEU.Core';
import { ApplicationFormBase, ApplicationFormFieldsBase } from '../ModelsAutoGenerated';
import { IApplicationFormValidationContext } from './ApplicationFormValidationContext';
import { ErrorLevels } from 'Cnsys.Core';

export class ApplicationFormBaseValidator<TApplication extends ApplicationFormBase> extends EPZEUBaseValidator<TApplication, IApplicationFormValidationContext> {
    constructor() {
        super();

    }

    public validate(obj: TApplication): boolean {
        let isValid = super.validate(obj);

        if (obj.documents != null && obj.documents.filter(d => !d.guid).length > 0) {
            obj.addError('documents', this.getMessage('GL_UNSIGNED_ATTACHED_DOCUMENTS_GENERATED_BY_TEMPLATE_E'), ErrorLevels.Error); // Има неподписани приложени документи, генерирани по шаблон.
            isValid = false;
        }
                
        return isValid;
    }
}

export class ApplicationFormFieldsBaseValidator<TFields extends ApplicationFormFieldsBase> extends EPZEUBaseValidator<TFields, IApplicationFormValidationContext> {
    constructor() {
        super();
    }
}