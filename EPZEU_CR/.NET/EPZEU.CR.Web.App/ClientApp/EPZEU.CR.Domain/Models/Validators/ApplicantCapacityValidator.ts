import { EPZEUBaseValidator } from 'EPZEU.Core';
import { ApplicationFormTypes } from 'EPZEU.CR.Core';
import { ApplicantCapacity } from '../ModelsAutoGenerated';
import { IApplicationFormValidationContext } from './ApplicationFormValidationContext';

export class ApplicantCapacityValidator extends EPZEUBaseValidator<ApplicantCapacity, IApplicationFormValidationContext> {

    public validate(obj: ApplicantCapacity): boolean {
        let isValid = super.validate(obj);

        var mainApp = this.validationContext && this.validationContext.applicationManager ? this.validationContext.applicationManager.application : null;

        if (!obj.trader && !obj.lawyerWithLetter && !obj.financialAccountCreator && !obj.procurator && !obj.anotherFace &&
            !obj.assignmentApplicant && !obj.assignedExpert && !obj.applicantLawyerWithPower && !obj.personRepresentingTheFoundation
            && !obj.personRepresentingTheAssociation && !obj.personRepresentingCommunityCentrer && !obj.personRepresentingBranchOfNonProfitForeignLegalEntity) {

            isValid = false;

            if (mainApp && mainApp.appType == ApplicationFormTypes.ActOfContestation)
                obj.addError(this.getMessage('GL_QUALITY_INTERESTED_PERSON_Е')); //Изберете качество на заинтересованото лице
            else
                obj.addError(this.getMessage('GL_QUALITY_APPLICANT_Е'));
        }

        return isValid;
    }
}