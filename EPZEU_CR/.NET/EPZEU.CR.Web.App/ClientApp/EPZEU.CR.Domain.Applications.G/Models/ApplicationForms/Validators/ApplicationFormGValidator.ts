import { ApplicationFormBaseValidator, ApplicationFormFieldsBaseValidator } from 'EPZEU.CR.Domain';
import { ApplicationFormGBase } from '../../ApplicationForms/ApplicationFormsG';
import { ApplicationFormGFieldsBase } from '../../ApplicationForms/ModelsAutoGenerated';
import { ErrorLevels } from 'Cnsys.Core';
    
export class ApplicationFormGValidator<TApplication extends ApplicationFormGBase<ApplicationFormGFieldsBase>> extends ApplicationFormBaseValidator<TApplication> {
    constructor() {
        super();
    }

    public validate(obj: TApplication): boolean {
        let isValid = super.validate(obj);
        obj.fields.statements.clearErrors();

        if (obj.documents == null || obj.documents.length == 0 || obj.documents.filter(x => x.documentTypeID.indexOf("5.") == 0).length == 0) {

            obj.fields.statements.addError(this.getMessage('CR_APP_00004_E'), ErrorLevels.Error);

            isValid = false;
        }

        return isValid;
    }
}

export class ApplicationFormGFieldsBaseValidator<TFields extends ApplicationFormGFieldsBase> extends ApplicationFormFieldsBaseValidator<TFields> {
    constructor() {
        super();
    }

    public validate(obj: TFields): boolean {
        let isValid = super.validate(obj);

        return isValid;
    }
}