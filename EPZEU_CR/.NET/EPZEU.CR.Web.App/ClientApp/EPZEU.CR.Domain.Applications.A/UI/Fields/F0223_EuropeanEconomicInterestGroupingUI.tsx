import { ObjectHelper } from "Cnsys.Core";
import { EPZEUBaseComponent } from 'EPZEU.Core';
import { EuropeanEconomicInterestRepresenterTypes, FieldContainerProps, ForeignCompanyBaseDataUI, ListRecordsContainerProps, RecordContainerProps, withFieldContainer, withListRecordsContainer, withRecordContainer, SectionSubTitle, withApplicationFormContext, ApplicationFormContextProviderProps, ProcessStates } from 'EPZEU.CR.Domain';
import * as React from "react";
import { F02231_EUIEAddempted, F02233_PowerOfLiquidators, F02234_PowerOfTrustees, F0223_ForeignCompanyData } from '../../Models/Fields/ModelsAutoGenerated';
import { F02203_ForeignTraderWayOfRepresentationUI } from "./F011_WayOfRepresentationUI";
import { F0223_EuropeanEconomicInterestGrouping, F02235_EuropeanEconomicInterestRepresenter } from "../../Models/Fields/F0223_EuropeanEconomicInterestGrouping";

class F0223_EuropeanEconomicInterestGroupingUI extends EPZEUBaseComponent<FieldContainerProps, F0223_EuropeanEconomicInterestGrouping> {

    renderEdit(): JSX.Element {
        return (<>
            <F0223_ForeignCompanyDataUI {...this.bind(m => m.foreignCompanyData)} />
            <SectionSubTitle subTitleTextKey={'CR_APP_REPRESENTING_EUROPEAN_UNITED_INTERESTS_L'} />
            <F02235_EuropeanEconomicInterestRepresenterUI
                addButtonLabelKey={"CR_APP_ADD_REPRESENTATIVE_L"}
                europeanEconomicInterestRepresenterType={EuropeanEconomicInterestRepresenterTypes.Regular} {...this.bind(x => x.europeanEconomicInterestRepresenterRegularList)} />

            <div className="row">
                <div className="col-sm-12">
                    <F02203_ForeignTraderWayOfRepresentationUI {...this.bind(m => m.representersWayOfManagement)} />
                </div>
            </div>
            <SectionSubTitle subTitleTextKey={'CR_APP_LIQUIDATORS_L'} />
            <F02235_EuropeanEconomicInterestRepresenterUI
                addButtonLabelKey={"CR_APP_ADD_LIQUIDATOR_L"}
                europeanEconomicInterestRepresenterType={EuropeanEconomicInterestRepresenterTypes.Liquidator} {...this.bind(x => x.europeanEconomicInterestRepresenterLiquidatorList)} />

            <F02233_PowerOfLiquidatorsUI {...this.bind(x => x.powerOfLiquidators)} />
            <SectionSubTitle subTitleTextKey={'CR_APP_SYNDICS_L'} />
            <F02235_EuropeanEconomicInterestRepresenterUI
                addButtonLabelKey={"CR_APP_ADD_SYNDIC_L"}
                europeanEconomicInterestRepresenterType={EuropeanEconomicInterestRepresenterTypes.Trustee} {...this.bind(x => x.europeanEconomicInterestRepresenterTrusteeList)} />

            <F02234_PowerOfTrusteesUI {...this.bind(x => x.powerOfTrustees)} />

            <F02231_EUIEAddemptedUI {...this.bind(x => x.euieAddempted)} />
        </>);
    }

    renderDisplay(): JSX.Element {
        return (
            <>
                <F0223_ForeignCompanyDataUI {...this.bind(m => m.foreignCompanyData)} />
                <F02235_EuropeanEconomicInterestRepresenterUI
                    addButtonLabelKey={"CR_APP_ADD_REPRESENTATIVE_L"}
                    europeanEconomicInterestRepresenterType={EuropeanEconomicInterestRepresenterTypes.Regular} {...this.bind(x => x.europeanEconomicInterestRepresenterRegularList)} />
                <F02203_ForeignTraderWayOfRepresentationUI labelKey={'CR_APP_00094_L'} {...this.bind(m => m.representersWayOfManagement)} />
                <F02235_EuropeanEconomicInterestRepresenterUI
                    addButtonLabelKey={"CR_APP_ADD_LIQUIDATOR_L"}
                    europeanEconomicInterestRepresenterType={EuropeanEconomicInterestRepresenterTypes.Liquidator} {...this.bind(x => x.europeanEconomicInterestRepresenterLiquidatorList)} />
                <F02233_PowerOfLiquidatorsUI {...this.bind(x => x.powerOfLiquidators)} />
                <F02235_EuropeanEconomicInterestRepresenterUI
                    addButtonLabelKey={"CR_APP_ADD_SYNDIC_L"}
                    europeanEconomicInterestRepresenterType={EuropeanEconomicInterestRepresenterTypes.Trustee} {...this.bind(x => x.europeanEconomicInterestRepresenterTrusteeList)} />
                <F02234_PowerOfTrusteesUI {...this.bind(x => x.powerOfTrustees)} />
                <F02231_EUIEAddemptedUI {...this.bind(x => x.euieAddempted)} />
            </>
        );
    }
}

export const F0223_EuropeanEconomicInterestGroupingFieldUI = withFieldContainer(F0223_EuropeanEconomicInterestGroupingUI, {
    fieldLabelTextKey: "CR_F_22v_L"
});

interface F02235_EuropeanEconomicInterestRepresenterProps extends ListRecordsContainerProps {
    europeanEconomicInterestRepresenterType: EuropeanEconomicInterestRepresenterTypes
}

class F02235_EuropeanEconomicInterestRepresenterImpl extends EPZEUBaseComponent<F02235_EuropeanEconomicInterestRepresenterProps, F02235_EuropeanEconomicInterestRepresenter> {

    constructor(props: F02235_EuropeanEconomicInterestRepresenterProps) {
        super(props);

        this.model.representerType = this.model.representerType ? this.model.representerType : this.props.europeanEconomicInterestRepresenterType;
    }

    renderEdit(): JSX.Element {
        return <div className="row">
            <div className="col-sm-6 form-group">
                {this.textBoxFor(m => m.representerName)}
            </div>
        </div>
    }

    renderDisplay(): JSX.Element {

        return !ObjectHelper.isStringNullOrEmpty(this.model.representerName)
            ? <div>{this.getResource(this.representerTypeLabel()) + ": " + this.model.representerName}</div>
            : null;
    }

    representerTypeLabel() {
        switch (this.model.representerType) {
            case EuropeanEconomicInterestRepresenterTypes.Regular: return "CR_APP_REPRESENTING_EUROPEAN_UNITED_INTERESTS_L";
            case EuropeanEconomicInterestRepresenterTypes.Liquidator: return "CR_APP_LIQUIDATORS_L";
            case EuropeanEconomicInterestRepresenterTypes.Trustee: return "CR_APP_SYNDICS_L";
            default: "Undefined";
        }
    }
}

const F02235_EuropeanEconomicInterestRepresenterUI = withListRecordsContainer(F02235_EuropeanEconomicInterestRepresenterImpl, F02235_EuropeanEconomicInterestRepresenter, {
    hasAtLeastOneRecord: true
})

class F02233_PowerOfLiquidatorsImpl extends EPZEUBaseComponent<RecordContainerProps, F02233_PowerOfLiquidators> {

    renderEdit(): JSX.Element {
        return (<div className="row">
            <div className="form-group col-12">
                {this.labelFor(x => x.text, "CR_APP_POWERS_LIQUIDATOR_L")}
                {this.textAreaFor(x => x.text)}
            </div>
        </div>)
    }

    renderDisplay(): JSX.Element {
        return !ObjectHelper.isStringNullOrEmpty(this.model.text) ? <>{this.getResource('CR_APP_POWERS_LIQUIDATOR_L') + ': ' + this.model.text}</> : null
    }
}

const F02233_PowerOfLiquidatorsUI = withRecordContainer(F02233_PowerOfLiquidatorsImpl);

class F02234_PowerOfTrusteesImpl extends EPZEUBaseComponent<RecordContainerProps, F02234_PowerOfTrustees> {

    renderEdit(): JSX.Element {
        return (<div className="row">
            <div className="form-group col-12">
                {this.labelFor(x => x.text, "CR_APP_POWERS_SYNDIC_L")}
                {this.textAreaFor(x => x.text)}
            </div>
        </div>)
    }

    renderDisplay(): JSX.Element {
        return !ObjectHelper.isStringNullOrEmpty(this.model.text) ? <>{this.getResource('CR_APP_POWERS_SYNDIC_L') + ': ' + this.model.text}</> : null
    }
}

const F02234_PowerOfTrusteesUI = withRecordContainer(F02234_PowerOfTrusteesImpl);

interface F02231_EUIEAddemptedProps extends ApplicationFormContextProviderProps, FieldContainerProps{
}

class F02231_EUIEAddemptedImpl extends EPZEUBaseComponent<F02231_EUIEAddemptedProps, F02231_EUIEAddempted> {

    renderEdit(): JSX.Element {
        return <>
            <SectionSubTitle subTitleTextKey={"CR_APP_DELETION_EUROPEAN_UNITED_INTERESTS_L"} />
            <div className="row">
                <div className="form-group col-12">
                    <div className="custom-control custom-checkbox">
                        {this.checkBoxFor(x => x.addempted, "GL_EFFACEMENT_L",
                            { className: "custom-control-input", disabled: this.props.applicationManager.processState == ProcessStates.ForChange && this.model.initialState.addempted === true ? true : false })}
                    </div>
                </div>
            </div>
        </>
    }

    renderDisplay(): JSX.Element {
        return (<>
            {
                this.model.addempted
                    ? <>{this.getResource("CR_APP_DELETION_EUROPEAN_UNITED_INTERESTS_L") + ": " + this.getResource('GL_EFFACEMENT_L')}</>
                    : null
            }
        </>);
    }
}

const F02231_EUIEAddemptedUI = withApplicationFormContext(withRecordContainer(F02231_EUIEAddemptedImpl));

class F0223_ForeignCompanyDataImpl extends EPZEUBaseComponent<RecordContainerProps, F0223_ForeignCompanyData> {

    renderEdit(): JSX.Element {
        return <ForeignCompanyBaseDataUI {...this.bind(x => x.companyData)} companyNameResourceKey={'CR_APP_NAME_EOII_L'} />
    }

    renderDisplay(): JSX.Element {
        return <ForeignCompanyBaseDataUI {...this.bind(x => x.companyData)} companyNameResourceKey={'CR_APP_NAME_EOII_L'} />
    }
}

const F0223_ForeignCompanyDataUI = withRecordContainer(F0223_ForeignCompanyDataImpl);
