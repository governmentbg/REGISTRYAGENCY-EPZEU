import { ObjectHelper } from 'Cnsys.Core';
import { EPZEUBaseComponent } from 'EPZEU.Core';
import { FieldContainerProps, withFieldRecordContainer } from 'EPZEU.CR.Domain';
import * as React from "react";
import { F017_SpecialConditions } from '../../Models/Fields/ModelsAutoGenerated';

export interface F017_SpecialConditionsProps extends FieldContainerProps {
    showConsortium?: boolean;
    showHolding?: boolean;
}

class F017_SpecialConditionsUI extends EPZEUBaseComponent<F017_SpecialConditionsProps, F017_SpecialConditions> {

    renderEdit(): JSX.Element {
        return <div className="row">
            <div className="form-group col-12">
                {this.textAreaFor(x => x.text)}
            </div>
            {this.props.showConsortium || this.props.showHolding ?
                <div className="form-group col-12">
                    {this.props.showConsortium === true ? <div className="custom-control custom-checkbox">{this.checkBoxFor(x => x.isConsortium, "CR_GL_CONSOURTIUM_COMPANY_L")}</div> : null}
                    {this.props.showHolding === true ? <div className="custom-control custom-checkbox">{this.checkBoxFor(x => x.isHolding, "CR_GL_HOLDING_COMPANY_L")}</div> : null}
                </div> : null}
        </div>
    }

    renderDisplay(): JSX.Element {
        return (<>
            {this.model.isConsortium && <>{this.getResource('CR_GL_CONSOURTIUM_COMPANY_L')}</>}
            {
                //слагаме <br/> само ако преди това сме render-нали нещо и ако след това ще render-ваме още нещо
                (this.model.isConsortium && (this.model.isHolding || this.model.text)) && <br />
            }
            {this.model.isHolding && <>{this.getResource('CR_GL_HOLDING_COMPANY_L')}</>}
            {
                //слагаме <br/> само ако сме render-нали за холдинг и ако след това ще render-ваме model.text
                (this.model.isHolding && this.model.text) && <br />
            }
            {!ObjectHelper.isStringNullOrEmpty(this.model.text) ? <span className="preserve-line-breaks">{this.model.text}</span> : null}
        </>);
    }
}

export const F017_SpecialConditionsFieldUI = withFieldRecordContainer(F017_SpecialConditionsUI, {
    fieldLabelTextKey: "CR_F_17_L",
    fieldLabelFor: (model: F017_SpecialConditions) => model.text
});