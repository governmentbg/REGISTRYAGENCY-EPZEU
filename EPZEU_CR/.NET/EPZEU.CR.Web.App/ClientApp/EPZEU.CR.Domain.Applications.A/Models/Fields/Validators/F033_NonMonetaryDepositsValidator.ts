import { EPZEUBaseValidator } from 'EPZEU.Core';
import { IApplicationFormValidationContext } from 'EPZEU.CR.Domain';
import { F033_NonMonetaryDeposits } from '../ModelsAutoGenerated';
import { F0330_NonMonetaryDepositValidator } from './F0330_NonMonetaryDepositValidator';

export class F033_NonMonetaryDepositsValidator extends EPZEUBaseValidator<F033_NonMonetaryDeposits, IApplicationFormValidationContext> {
    constructor() {
        super();

        this.ruleFor(m => m.nonMonetaryDepositsList).setCollectionValidator(new F0330_NonMonetaryDepositValidator());
    }

    public validate(obj: F033_NonMonetaryDeposits): boolean {

        let isValid = super.validate(obj);

        //ако сме добавяли в списъка празни полета, трябва да ги попълним или изтрием
        if (obj.nonMonetaryDepositsList.length > 1) {
            for (var i = 0; i < obj.nonMonetaryDepositsList.length; i++) {
                if (this.validationContext.isRecordEmpty(obj.nonMonetaryDepositsList[i])) {
                    obj.nonMonetaryDepositsList[i].addError(this.getMessage('CR_APP_00063_E'));
                    isValid = false;
                }
            }
        }

        return isValid;
    }
}