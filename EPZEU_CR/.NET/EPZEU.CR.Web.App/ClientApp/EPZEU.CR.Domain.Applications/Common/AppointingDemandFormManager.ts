import { ObjectHelper } from 'Cnsys.Core';
import { ApplicationFormBaseManager, UIC } from 'EPZEU.CR.Domain';
import { AppointingDemand } from '../Models/ModelsAutoGenerated';

export class AppointingDemandFormManager extends ApplicationFormBaseManager<AppointingDemand> {

    protected createApplication(obj: any): AppointingDemand {
        return new AppointingDemand(obj);
    }

    public prepareForSave(): Promise<void> {

        if (this.application.appointingFirms && this.application.appointingFirms.appointingFirmList && this.application.appointingFirms.appointingFirmList.length > 0
            && !ObjectHelper.isStringNullOrEmpty(this.application.appointingFirms.appointingFirmList[0].firm.indent)) {

            this.application.uic = this.application.appointingFirms.appointingFirmList[this.application.appointingFirms.appointingFirmList.length - 1].firm.indent;
            this.application.uicElement = new UIC();
            this.application.uicElement.text = this.application.appointingFirms.appointingFirmList[this.application.appointingFirms.appointingFirmList.length - 1].firm.indent;
            this.application.uicElement.isNew = true;
        } else {
            this.application.uic = null;
            this.application.uicElement = null;
        }

        return Promise.resolve();
    }
}