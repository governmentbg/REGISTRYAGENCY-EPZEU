import { ErrorLevels } from 'Cnsys.Core';
import { ApplicationFormBaseValidator } from 'EPZEU.CR.Domain';
import { J1 } from '../../ModelsAutoGenerated';
import { IncomingNumberValidator } from '../../Validators/IncomingNumberValidator';

export class J1Validator extends ApplicationFormBaseValidator<J1> {
    constructor() {
        super();

        this.ruleFor(m => m.incomingNumber).setValidator(new IncomingNumberValidator());
    }

    public validate(obj: J1): boolean {
        let isValid = super.validate(obj);

        if (obj.documents == null || obj.documents.length == 0) {
            obj.addError('documents', this.getMessage('GL_NOATTACHED_DOCUMENTS_E'));
            isValid = false;
        }

        obj.setAllErrorsLevel(ErrorLevels.Error);

        return isValid;
    }
}